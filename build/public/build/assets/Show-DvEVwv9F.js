import{j as e,Q as j,S as b}from"./app-DQ50vfdB.js";import{F as N}from"./file-text-DTPo9xYu.js";import{U as f}from"./user-Dxw8grQx.js";import{C as k}from"./circle-check-big-V2puaTkF.js";import{c as u}from"./createLucideIcon-BDCxl-nA.js";import{C as y}from"./clock-D7XOpUOi.js";import{T as v}from"./TailLayout-CUFZkN9l.js";import"./TechStackBackground-vFG2YikW.js";import"./index-CXCxKWl8.js";import"./XMarkIcon-iLJawDXb.js";import"./UsersIcon-Do4GODTd.js";import"./transition-B40-nL65.js";import"./dialog-B4S7MQxj.js";import"./with-selector-CC73ae-U.js";import"./index-OSMIWnHG.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],g=u("circle-check",w);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]],D=u("scale",_),P=({currentStatus:l,assignedUsers:s={}})=>{var n,t,d,h;const c=[{id:"diajukan",label:"Input Pengajuan",description:"Staf input membuat pengajuan pinjaman",icon:N,user:(n=s.staf_input)==null?void 0:n.name},{id:"diperiksa",label:"Review Admin Kredit",description:"Admin kredit memeriksa dan melengkapi berkas",icon:f,user:(t=s.admin_kredit)==null?void 0:t.name},{id:"dianalisis",label:"Analisis Lapangan",description:"Analis melakukan survei dan analisis lapangan",icon:k,user:(d=s.analis)==null?void 0:d.name},{id:"siap_diputuskan",label:"Keputusan Akhir",description:"Pemutus memberikan keputusan final",icon:D,user:(h=s.pemutus)==null?void 0:h.name},{id:"disetujui",label:"Selesai",description:"Pinjaman telah disetujui dan selesai",icon:g,user:null}],m=a=>{const o=["diajukan","diperiksa","dianalisis","siap_diputuskan","disetujui"],r=o.indexOf(l),i=o.indexOf(a);return l==="ditolak"?i<=r?"completed":"pending":l==="dikembalikan"?i===0?"current":"pending":i<r?"completed":i===r?"current":"pending"},x=a=>{switch(a){case"completed":return{container:"bg-green-50 border-green-200",icon:"bg-green-500 text-white",title:"text-green-800",description:"text-green-600"};case"current":return{container:"bg-blue-50 border-blue-200",icon:"bg-blue-500 text-white",title:"text-blue-800",description:"text-blue-600"};default:return{container:"bg-gray-50 border-gray-200",icon:"bg-gray-300 text-gray-500",title:"text-gray-500",description:"text-gray-400"}}};return e.jsxs("div",{className:"space-y-4",children:[l==="dikembalikan"&&e.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(y,{className:"mr-2 h-5 w-5 text-red-500"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-red-800",children:"Berkas Dikembalikan"}),e.jsx("p",{className:"text-sm text-red-600",children:"Berkas perlu diperbaiki dan diajukan kembali"})]})]})}),l==="ditolak"&&e.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(g,{className:"mr-2 h-5 w-5 text-red-500"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-red-800",children:"Pinjaman Ditolak"}),e.jsx("p",{className:"text-sm text-red-600",children:"Pengajuan pinjaman telah ditolak"})]})]})}),e.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-5",children:c.map((a,o)=>{const r=m(a.id),i=x(r),p=a.icon;return e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`rounded-lg border p-4 ${i.container}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`flex-shrink-0 rounded-full p-2 ${i.icon}`,children:e.jsx(p,{className:"h-5 w-5"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:`text-sm font-medium ${i.title}`,children:a.label}),e.jsx("p",{className:`mt-1 text-xs ${i.description}`,children:a.description}),a.user&&e.jsxs("p",{className:`mt-2 text-xs font-medium ${i.title}`,children:["üë§ ",a.user]}),r==="current"&&!a.user&&e.jsx("p",{className:"mt-2 text-xs font-medium text-orange-600",children:"üïê Menunggu diambil"})]})]})}),o<c.length-1&&e.jsx("div",{className:"absolute right-0 top-1/2 hidden -translate-y-1/2 translate-x-1/2 transform md:block",children:e.jsx("div",{className:`h-0.5 w-8 ${r==="completed"?"bg-green-300":"bg-gray-200"}`})})]},a.id)})})]})};function Q({auth:l,pinjaman:s}){var m,x,n;const c=t=>({diajukan:"bg-blue-100 text-blue-800",diperiksa:"bg-yellow-100 text-yellow-800",dikembalikan:"bg-red-100 text-red-800",dianalisis:"bg-purple-100 text-purple-800",siap_diputuskan:"bg-indigo-100 text-indigo-800",disetujui:"bg-green-100 text-green-800",ditolak:"bg-red-100 text-red-800"})[t]||"bg-gray-100 text-gray-800";return e.jsxs(v,{children:[e.jsx(j,{title:`Pinjaman #${s.id}`}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Detail Pinjaman #",s.id]}),e.jsx("span",{className:`inline-flex rounded-full px-3 py-1 text-sm font-semibold ${c(s.status)}`,children:s.status.toUpperCase()})]}),e.jsxs("div",{className:"mb-6 rounded-lg bg-white p-6 shadow-sm",children:[e.jsx("h3",{className:"mb-4 text-lg font-medium text-gray-900",children:"Progress Workflow"}),e.jsx(P,{currentStatus:s.status,assignedUsers:{staf_input:s.staf_input,admin_kredit:s.admin_kredit,analis:s.analis,pemutus:s.pemutus}})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"overflow-hidden rounded-lg bg-white shadow-sm",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"mb-4 text-lg font-medium text-gray-900",children:"Informasi Nasabah"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Nama Lengkap"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s.nasabah.nama_lengkap})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Nomor KTP"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s.nasabah.nomor_ktp})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Alamat"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s.nasabah.alamat})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Nomor WhatsApp"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s.nasabah.nomor_wa})]})]})]})}),e.jsx("div",{className:"overflow-hidden rounded-lg bg-white shadow-sm",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"mb-4 text-lg font-medium text-gray-900",children:"Informasi Pinjaman"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Jumlah Pinjaman"}),e.jsxs("p",{className:"mt-1 text-lg font-semibold text-gray-900",children:["Rp ",s.jumlah_pinjaman.toLocaleString("id-ID")]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Tanggal Pengajuan"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:new Date(s.created_at).toLocaleDateString("id-ID")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Staf Input"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-gray-100",children:s.staf_input.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Admin Kredit"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-gray-100",children:((m=s.admin_kredit)==null?void 0:m.name)||"Belum ditentukan"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Analis"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-gray-100",children:((x=s.analis)==null?void 0:x.name)||"Belum ditentukan"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Pemutus"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-gray-100",children:((n=s.pemutus)==null?void 0:n.name)||"Belum ditentukan"})]})]}),s.catatan&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Catatan"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-gray-100",children:s.catatan})]})]})}),e.jsx("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg dark:bg-gray-800",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"mb-4 text-lg font-medium text-gray-900 dark:text-gray-100",children:"Berkas Pinjaman"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Nama Berkas"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Diupload Oleh"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Tanggal Upload"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:s.berkas_pinjaman.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-gray-900",children:t.nama_berkas}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-500",children:t.diupload_oleh_role.replace("_"," ").toUpperCase()}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-500",children:new Date(t.created_at).toLocaleDateString("id-ID")}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("a",{href:`/pinjaman/berkas/${t.id}/view`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-900",children:"View"}),e.jsx("a",{href:`/pinjaman/berkas/${t.id}/download`,className:"text-indigo-600 hover:text-indigo-900",children:"Download"}),e.jsx("button",{onClick:()=>{confirm("Yakin ingin menghapus berkas ini?")&&b.delete(`/pinjaman/berkas/${t.id}`)},className:"text-red-600 hover:text-red-900",children:"Delete"})]})})]},t.id))})]})})]})}),e.jsx("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg dark:bg-gray-800",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"mb-4 text-lg font-medium text-gray-900 dark:text-gray-100",children:"Log Aktivitas"}),e.jsx("div",{className:"flow-root",children:e.jsx("ul",{className:"-mb-8",children:s.log_pinjaman.map((t,d)=>e.jsx("li",{children:e.jsxs("div",{className:"relative pb-8",children:[d!==s.log_pinjaman.length-1&&e.jsx("span",{className:"absolute left-4 top-4 -ml-px h-full w-0.5 bg-gray-200","aria-hidden":"true"}),e.jsxs("div",{className:"relative flex space-x-3",children:[e.jsx("div",{children:e.jsx("span",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-blue-500 ring-8 ring-white",children:e.jsx("span",{className:"text-xs font-bold text-white",children:d+1})})}),e.jsxs("div",{className:"flex min-w-0 flex-1 justify-between space-x-4 pt-1.5",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-500",children:[e.jsx("strong",{className:"font-medium text-gray-900",children:t.aksi})," ","oleh ",t.user.name]}),t.deskripsi&&e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:t.deskripsi})]}),e.jsxs("div",{className:"whitespace-nowrap text-right text-sm text-gray-500",children:[new Date(t.created_at).toLocaleDateString("id-ID")," ",new Date(t.created_at).toLocaleTimeString("id-ID")]})]})]})]})},t.id))})})]})}),e.jsx("div",{className:"flex justify-end",children:e.jsx("a",{href:route("dashboard"),className:"rounded bg-gray-300 px-4 py-2 text-gray-700 hover:bg-gray-400",children:"Kembali ke Dashboard"})})]})]})]})}export{Q as default};
