import{j as e,Q as t}from"./app-DQ50vfdB.js";import{W as c}from"./WorkflowStepIndicator-DUsDAVIY.js";import{T as u}from"./TailLayout-CUFZkN9l.js";import{F as x}from"./DocumentTextIcon-WQjWO2mO.js";import{F as h}from"./ClockIcon-Bw5Yb6Dk.js";import"./TechStackBackground-vFG2YikW.js";import"./index-CXCxKWl8.js";import"./XMarkIcon-iLJawDXb.js";import"./UsersIcon-Do4GODTd.js";import"./transition-B40-nL65.js";import"./dialog-B4S7MQxj.js";import"./with-selector-CC73ae-U.js";import"./index-OSMIWnHG.js";function g({statistics:l,role:r}){const i=()=>{switch(r){case"staf_input":return[{label:"Total Pengajuan",value:l.total_pengajuan||0,color:"blue"},{label:"Sedang Proses",value:l.sedang_proses||0,color:"yellow"},{label:"Disetujui",value:l.disetujui||0,color:"green"},{label:"Ditolak",value:l.ditolak||0,color:"red"}];case"admin_kredit":return[{label:"Tersedia Diambil",value:l.available||0,color:"blue"},{label:"Tugas Saya",value:l.my_tasks||0,color:"yellow"},{label:"Selesai Hari Ini",value:l.completed_today||0,color:"green"},{label:"Total Diproses",value:l.total_diproses||0,color:"purple"}];case"analis":return[{label:"Tersedia Diambil",value:l.available||0,color:"blue"},{label:"Tugas Saya",value:l.my_tasks||0,color:"yellow"},{label:"Selesai Hari Ini",value:l.completed_today||0,color:"green"},{label:"Total Dianalisis",value:l.total_dianalisis||0,color:"purple"}];case"pemutus":return[{label:"Tersedia Diambil",value:l.available||0,color:"blue"},{label:"Tugas Saya",value:l.my_tasks||0,color:"yellow"},{label:"Disetujui Hari Ini",value:l.approved_today||0,color:"green"},{label:"Ditolak Hari Ini",value:l.rejected_today||0,color:"red"}];default:return[{label:"Diajukan",value:l.total_diajukan||0,color:"blue"},{label:"Diproses",value:(l.total_diperiksa||0)+(l.total_dianalisis||0)+(l.total_siap_diputuskan||0),color:"yellow"},{label:"Disetujui",value:l.total_disetujui||0,color:"green"},{label:"Ditolak",value:l.total_ditolak||0,color:"red"}]}},o=s=>({blue:"bg-blue-500",yellow:"bg-yellow-500",red:"bg-red-500",green:"bg-green-500",purple:"bg-purple-500"})[s]||"bg-gray-500",d=i();return e.jsx("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:d.map((s,n)=>e.jsx("div",{className:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800",children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:`flex h-10 w-10 items-center justify-center rounded-md ${o(s.color)} text-white`,children:e.jsx("span",{className:"text-lg font-bold",children:s.value})})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"truncate text-sm font-medium text-gray-500 dark:text-gray-400",children:s.label}),e.jsxs("dd",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:[s.value," item"]})]})})]})})},n))})}const $=({auth:l,stats:r,recentActivities:i,userRole:o})=>{const d=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(a),s=a=>new Date(a).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),n=()=>{const a=[];switch(o){case"staf_input":a.push({name:"Buat Pengajuan Baru",href:"/pinjaman/create",color:"green"});break;case"admin_kredit":r.available>0&&a.push({name:`Ambil Berkas Tersedia (${r.available})`,href:"/pinjaman?available=true",color:"red",urgent:!0}),r.my_tasks>0&&a.push({name:`Tugas Saya (${r.my_tasks})`,href:"/pinjaman?my_tasks=true",color:"yellow"});break;case"analis":r.available>0&&a.push({name:`Ambil Berkas Tersedia (${r.available})`,href:"/pinjaman?available=true",color:"red",urgent:!0}),r.my_tasks>0&&a.push({name:`Tugas Saya (${r.my_tasks})`,href:"/pinjaman?my_tasks=true",color:"yellow"});break;case"pemutus":r.available>0&&a.push({name:`Ambil Berkas Tersedia (${r.available})`,href:"/pinjaman?available=true",color:"red",urgent:!0}),r.my_tasks>0&&a.push({name:`Tugas Saya (${r.my_tasks})`,href:"/pinjaman?my_tasks=true",color:"yellow"});break}return a.push({name:"Lihat Semua Pinjaman",href:"/pinjaman",color:"blue"}),a};return e.jsxs(u,{user:l.user,children:[e.jsx(t,{title:"Workflow Dashboard"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6 text-gray-900",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard Workflow"}),e.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Selamat datang, ",l.user.name," (",l.user.role,")"]})]}),e.jsx("div",{className:"mb-8",children:e.jsx(g,{statistics:r,role:o})}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"mb-4 text-lg font-medium text-gray-900",children:"Quick Actions"}),e.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:n().map((a,m)=>e.jsx("a",{href:a.href,className:`group relative rounded-lg p-6 focus-within:ring-2 focus-within:ring-inset focus-within:ring-indigo-500 ${a.urgent?"border-2 border-red-200 bg-red-50 hover:bg-red-100":"bg-gray-50 hover:bg-gray-100"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:`flex h-10 w-10 items-center justify-center rounded-md ${a.urgent?"bg-red-500":a.color==="green"?"bg-green-500":a.color==="yellow"?"bg-yellow-500":"bg-blue-500"} text-white`,children:e.jsx(x,{className:"h-6 w-6"})})}),e.jsx("div",{className:"ml-4",children:e.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[a.name,a.urgent&&e.jsx("span",{className:"ml-2 inline-flex items-center rounded-full bg-red-100 px-2.5 py-0.5 text-xs font-medium text-red-800",children:"Urgent"})]})})]})},m))})]}),i&&i.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"mb-4 text-lg font-medium text-gray-900",children:"Aktivitas Terbaru"}),e.jsx("div",{className:"overflow-hidden bg-white shadow sm:rounded-md",children:e.jsx("ul",{className:"divide-y divide-gray-200",children:i.slice(0,5).map(a=>e.jsx("li",{children:e.jsx("div",{className:"px-4 py-4 sm:px-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(c,{currentStatus:a.status,showLabels:!1})}),e.jsxs("div",{className:"ml-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("p",{className:"truncate text-sm font-medium text-indigo-600",children:a.nasabah_nama}),e.jsx("p",{className:"ml-2 flex-shrink-0 text-sm text-gray-500",children:d(a.jumlah)})]}),a.last_activity&&e.jsxs("div",{className:"mt-1",children:[e.jsx("p",{className:"text-sm text-gray-900",children:a.last_activity.description}),e.jsxs("p",{className:"text-sm text-gray-500",children:["oleh ",a.last_activity.user," â€¢"," ",e.jsx("time",{children:s(a.last_activity.created_at)})]})]})]})]}),e.jsx("div",{className:"flex items-center",children:e.jsx(h,{className:"h-5 w-5 text-gray-400"})})]})})},a.id))})})]})]})})})})]})};export{$ as default};
