import{x as h,j as e,Q as p}from"./app-DQ50vfdB.js";import{A as j}from"./AuthenticatedLayout-BzOY_iB6.js";import"./ApplicationLogo-69MahTRe.js";import"./transition-B40-nL65.js";function w({auth:k,nasabah:c}){const{data:t,setData:d,post:u,processing:o,errors:l,progress:i}=h({nasabah_id:"",jumlah_pinjaman:"",berkas:[{nama_berkas:"",file:null}]}),x=a=>{a.preventDefault(),u(route("pinjaman.store"))},b=()=>{d("berkas",[...t.berkas,{nama_berkas:"",file:null}])},g=a=>{const s=t.berkas.filter((n,r)=>r!==a);d("berkas",s)},m=(a,s,n)=>{const r=[...t.berkas];r[a]={...r[a],[s]:n},d("berkas",r)};return e.jsxs(j,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:"Buat Pengajuan Pinjaman Baru"}),children:[e.jsx(p,{title:"Buat Pengajuan"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg dark:bg-gray-800",children:e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:x,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Pilih Nasabah"}),e.jsxs("select",{value:t.nasabah_id,onChange:a=>d("nasabah_id",a.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300",required:!0,children:[e.jsx("option",{value:"",children:"Pilih Nasabah..."}),c.map(a=>e.jsxs("option",{value:a.id,children:[a.nama_lengkap," - ",a.nomor_ktp]},a.id))]}),l.nasabah_id&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:l.nasabah_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Jumlah Pinjaman (Rp)"}),e.jsx("input",{type:"number",value:t.jumlah_pinjaman,onChange:a=>d("jumlah_pinjaman",a.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300",placeholder:"Masukkan jumlah pinjaman",min:"1",required:!0}),l.jumlah_pinjaman&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:l.jumlah_pinjaman})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Upload Berkas Awal"}),e.jsx("div",{className:"mt-2 space-y-4",children:t.berkas.map((a,s)=>e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",placeholder:"Nama berkas (contoh: KTP, KK, Slip Gaji)",value:a.nama_berkas,onChange:n=>m(s,"nama_berkas",n.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300",required:!0})}),e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:n=>{var r;return m(s,"file",((r=n.target.files)==null?void 0:r[0])||null)},className:"block w-full text-sm text-gray-500 file:mr-4 file:rounded-full file:border-0 file:bg-blue-50 file:px-4 file:py-2 file:text-sm file:font-semibold file:text-blue-700 hover:file:bg-blue-100",required:!0})}),t.berkas.length>1&&e.jsx("button",{type:"button",onClick:()=>g(s),className:"rounded bg-red-500 px-3 py-2 text-white hover:bg-red-600",children:"Hapus"})]},s))}),e.jsx("button",{type:"button",onClick:b,className:"mt-2 rounded bg-green-500 px-4 py-2 text-white hover:bg-green-600",children:"Tambah Berkas"}),l.berkas&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:l.berkas})]}),i&&e.jsxs("div",{className:"h-2.5 w-full rounded-full bg-gray-200",children:[e.jsx("div",{className:"h-2.5 rounded-full bg-blue-600 transition-all duration-300",style:{width:`${i.percentage}%`}}),e.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:["Upload progress: ",i.percentage,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-4",children:[e.jsx("a",{href:route("dashboard"),className:"rounded bg-gray-300 px-4 py-2 text-gray-700 hover:bg-gray-400",children:"Batal"}),e.jsx("button",{type:"submit",disabled:o,className:"rounded bg-blue-500 px-4 py-2 text-white hover:bg-blue-600 disabled:opacity-50",children:o?"Menyimpan...":"Buat Pengajuan"})]})]})})})})})]})}export{w as default};
