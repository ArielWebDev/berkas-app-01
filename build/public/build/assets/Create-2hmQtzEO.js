import{j as n,r as d,Q as be,S as O}from"./app-DQ50vfdB.js";import{c as Q,u as ye,i as ke,j as B,o as H,k as we,l as G,m as V,n as Y,p as J,s as A,q as Z,r as Ce,t as ee,v as K,w as Se,x as T,G as Ee,y as M,M as je,B as j,b as z,T as $,C as Pe,a as Te,z as L}from"./MaterialLayout-ChKCvITY.js";import{m as Le}from"./proxy-Bnqo7GU3.js";import{T as R,F as Re,I as Me,S as Ae,a as Oe,A as He}from"./TextField-D9E1UKik.js";import{c as ze}from"./index-epZWharM.js";import"./index-OSMIWnHG.js";const Be=Q(n.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"})),De=Q(n.jsx("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"}));function X(e){return e.substring(2).toLowerCase()}function Fe(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}function Ie(e){const{children:t,disableReactTree:p=!1,mouseEvent:o="onClick",onClickAway:c,touchEvent:a="onTouchEnd"}=e,m=d.useRef(!1),f=d.useRef(null),u=d.useRef(!1),x=d.useRef(!1);d.useEffect(()=>(setTimeout(()=>{u.current=!0},0),()=>{u.current=!1}),[]);const r=ye(ke(t),f),h=B(l=>{const v=x.current;x.current=!1;const k=H(f.current);if(!u.current||!f.current||"clientX"in l&&Fe(l,k))return;if(m.current){m.current=!1;return}let s;l.composedPath?s=l.composedPath().includes(f.current):s=!k.documentElement.contains(l.target)||f.current.contains(l.target),!s&&(p||!v)&&c(l)}),C=l=>v=>{x.current=!0;const k=t.props[l];k&&k(v)},S={ref:r};return a!==!1&&(S[a]=C(a)),d.useEffect(()=>{if(a!==!1){const l=X(a),v=H(f.current),k=()=>{m.current=!0};return v.addEventListener(l,h),v.addEventListener("touchmove",k),()=>{v.removeEventListener(l,h),v.removeEventListener("touchmove",k)}}},[h,a]),o!==!1&&(S[o]=C(o)),d.useEffect(()=>{if(o!==!1){const l=X(o),v=H(f.current);return v.addEventListener(l,h),()=>{v.removeEventListener(l,h)}}},[h,o]),d.cloneElement(t,S)}function Ue(e={}){const{autoHideDuration:t=null,disableWindowBlurListener:p=!1,onClose:o,open:c,resumeHideDuration:a}=e,m=we();d.useEffect(()=>{if(!c)return;function s(i){i.defaultPrevented||i.key==="Escape"&&(o==null||o(i,"escapeKeyDown"))}return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s)}},[c,o]);const f=B((s,i)=>{o==null||o(s,i)}),u=B(s=>{!o||s==null||m.start(s,()=>{f(null,"timeout")})});d.useEffect(()=>(c&&u(t),m.clear),[c,t,u,m]);const x=s=>{o==null||o(s,"clickaway")},r=m.clear,h=d.useCallback(()=>{t!=null&&u(a??t*.5)},[t,a,u]),C=s=>i=>{const g=s.onBlur;g==null||g(i),h()},S=s=>i=>{const g=s.onFocus;g==null||g(i),r()},l=s=>i=>{const g=s.onMouseEnter;g==null||g(i),r()},v=s=>i=>{const g=s.onMouseLeave;g==null||g(i),h()};return d.useEffect(()=>{if(!p&&c)return window.addEventListener("focus",h),window.addEventListener("blur",r),()=>{window.removeEventListener("focus",h),window.removeEventListener("blur",r)}},[p,c,h,r]),{getRootProps:(s={})=>{const i={...G(e),...G(s)};return{role:"presentation",...s,...i,onBlur:C(i),onFocus:S(i),onMouseEnter:l(i),onMouseLeave:v(i)}},onClickAway:x}}function We(e){return V("MuiSnackbarContent",e)}Y("MuiSnackbarContent",["root","message","action"]);const Ne=e=>{const{classes:t}=e;return Z({root:["root"],action:["action"],message:["message"]},We,t)},qe=A(Ce,{name:"MuiSnackbarContent",slot:"Root"})(ee(({theme:e})=>{const t=e.palette.mode==="light"?.8:.98;return{...e.typography.body2,color:e.vars?e.vars.palette.SnackbarContent.color:e.palette.getContrastText(K(e.palette.background.default,t)),backgroundColor:e.vars?e.vars.palette.SnackbarContent.bg:K(e.palette.background.default,t),display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",flexGrow:1,[e.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}}})),_e=A("div",{name:"MuiSnackbarContent",slot:"Message"})({padding:"8px 0"}),Ge=A("div",{name:"MuiSnackbarContent",slot:"Action"})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),Ke=d.forwardRef(function(t,p){const o=J({props:t,name:"MuiSnackbarContent"}),{action:c,className:a,message:m,role:f="alert",...u}=o,x=o,r=Ne(x);return n.jsxs(qe,{role:f,elevation:6,className:ze(r.root,a),ownerState:x,ref:p,...u,children:[n.jsx(_e,{className:r.message,ownerState:x,children:m}),c?n.jsx(Ge,{className:r.action,ownerState:x,children:c}):null]})});function $e(e){return V("MuiSnackbar",e)}Y("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const Xe=e=>{const{classes:t,anchorOrigin:p}=e,o={root:["root",`anchorOrigin${M(p.vertical)}${M(p.horizontal)}`]};return Z(o,$e,t)},Qe=A("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:p}=e;return[t.root,t[`anchorOrigin${M(p.anchorOrigin.vertical)}${M(p.anchorOrigin.horizontal)}`]]}})(ee(({theme:e})=>({zIndex:(e.vars||e).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center",variants:[{props:({ownerState:t})=>t.anchorOrigin.vertical==="top",style:{top:8,[e.breakpoints.up("sm")]:{top:24}}},{props:({ownerState:t})=>t.anchorOrigin.vertical!=="top",style:{bottom:8,[e.breakpoints.up("sm")]:{bottom:24}}},{props:({ownerState:t})=>t.anchorOrigin.horizontal==="left",style:{justifyContent:"flex-start",[e.breakpoints.up("sm")]:{left:24,right:"auto"}}},{props:({ownerState:t})=>t.anchorOrigin.horizontal==="right",style:{justifyContent:"flex-end",[e.breakpoints.up("sm")]:{right:24,left:"auto"}}},{props:({ownerState:t})=>t.anchorOrigin.horizontal==="center",style:{[e.breakpoints.up("sm")]:{left:"50%",right:"auto",transform:"translateX(-50%)"}}}]}))),Ve=d.forwardRef(function(t,p){const o=J({props:t,name:"MuiSnackbar"}),c=Se(),a={enter:c.transitions.duration.enteringScreen,exit:c.transitions.duration.leavingScreen},{action:m,anchorOrigin:{vertical:f,horizontal:u}={vertical:"bottom",horizontal:"left"},autoHideDuration:x=null,children:r,className:h,ClickAwayListenerProps:C,ContentProps:S,disableWindowBlurListener:l=!1,message:v,onBlur:k,onClose:s,onFocus:i,onMouseEnter:g,onMouseLeave:Ye,open:D,resumeHideDuration:Je,slots:F={},slotProps:te={},TransitionComponent:I,transitionDuration:U=a,TransitionProps:{onEnter:W,onExited:N,...ne}={},...oe}=o,E={...o,anchorOrigin:{vertical:f,horizontal:u},autoHideDuration:x,disableWindowBlurListener:l,TransitionComponent:I,transitionDuration:U},re=Xe(E),{getRootProps:se,onClickAway:ae}=Ue({...E}),[ie,q]=d.useState(!0),ce=b=>{q(!0),N&&N(b)},le=(b,y)=>{q(!1),W&&W(b,y)},P={slots:{transition:I,...F},slotProps:{content:S,clickAwayListener:C,transition:ne,...te}},[ue,de]=T("root",{ref:p,className:[re.root,h],elementType:Qe,getSlotProps:se,externalForwardedProps:{...P,...oe},ownerState:E}),[pe,{ownerState:me,...fe}]=T("clickAwayListener",{elementType:Ie,externalForwardedProps:P,getSlotProps:b=>({onClickAway:(...y)=>{var _;const w=y[0];(_=b.onClickAway)==null||_.call(b,...y),!(w!=null&&w.defaultMuiPrevented)&&ae(...y)}}),ownerState:E}),[he,ge]=T("content",{elementType:Ke,shouldForwardComponentProp:!0,externalForwardedProps:P,additionalProps:{message:v,action:m},ownerState:E}),[xe,ve]=T("transition",{elementType:Ee,externalForwardedProps:P,getSlotProps:b=>({onEnter:(...y)=>{var w;(w=b.onEnter)==null||w.call(b,...y),le(...y)},onExited:(...y)=>{var w;(w=b.onExited)==null||w.call(b,...y),ce(...y)}}),additionalProps:{appear:!0,in:D,timeout:U,direction:f==="top"?"down":"up"},ownerState:E});return!D&&ie?null:n.jsx(pe,{...fe,...F.clickAwayListener&&{ownerState:me},children:n.jsx(ue,{...de,children:n.jsx(xe,{...ve,children:r||n.jsx(he,{...ge})})})})});function st({errors:e={}}){const[t,p]=d.useState({name:"",email:"",password:"",password_confirmation:"",role:""}),[o,c]=d.useState({open:!1,message:"",severity:"success"}),[a,m]=d.useState(!1),f=r=>{r.preventDefault(),m(!0),O.post("/users",t,{onSuccess:()=>{c({open:!0,message:"User berhasil dibuat",severity:"success"}),O.visit("/users")},onError:()=>{c({open:!0,message:"Gagal membuat user",severity:"error"}),m(!1)},onFinish:()=>{m(!1)}})},u=(r,h)=>{p(C=>({...C,[r]:h}))},x=()=>{O.visit("/users")};return n.jsxs(je,{children:[n.jsx(be,{title:"Tambah User"}),n.jsxs(Le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[n.jsxs(j,{sx:{mb:3,display:"flex",alignItems:"center",gap:2},children:[n.jsx(z,{startIcon:n.jsx(Be,{}),onClick:x,variant:"outlined",children:"Kembali"}),n.jsxs(j,{children:[n.jsx($,{variant:"h4",component:"h1",gutterBottom:!0,children:"Tambah User"}),n.jsx($,{variant:"body1",color:"text.secondary",children:"Buat pengguna baru untuk sistem"})]})]}),n.jsx(Pe,{children:n.jsx(Te,{children:n.jsx(j,{component:"form",onSubmit:f,sx:{maxWidth:600},children:n.jsxs(j,{sx:{display:"flex",flexDirection:"column",gap:3},children:[n.jsx(R,{label:"Nama Lengkap",required:!0,fullWidth:!0,value:t.name,onChange:r=>u("name",r.target.value),error:!!e.name,helperText:e.name,disabled:a}),n.jsx(R,{label:"Email",type:"email",required:!0,fullWidth:!0,value:t.email,onChange:r=>u("email",r.target.value),error:!!e.email,helperText:e.email,disabled:a}),n.jsxs(Re,{fullWidth:!0,required:!0,error:!!e.role,children:[n.jsx(Me,{children:"Role"}),n.jsxs(Ae,{value:t.role,label:"Role",onChange:r=>u("role",r.target.value),disabled:a,children:[n.jsx(L,{value:"admin",children:"Super Admin"}),n.jsx(L,{value:"admin_kredit",children:"Admin Kredit"}),n.jsx(L,{value:"analis",children:"Analis"}),n.jsx(L,{value:"pemutus",children:"Pemutus"})]}),e.role&&n.jsx(Oe,{children:e.role})]}),n.jsx(R,{label:"Password",type:"password",required:!0,fullWidth:!0,value:t.password,onChange:r=>u("password",r.target.value),error:!!e.password,helperText:e.password||"Minimal 8 karakter",disabled:a}),n.jsx(R,{label:"Konfirmasi Password",type:"password",required:!0,fullWidth:!0,value:t.password_confirmation,onChange:r=>u("password_confirmation",r.target.value),error:!!e.password_confirmation,helperText:e.password_confirmation,disabled:a}),n.jsxs(j,{sx:{display:"flex",gap:2,mt:2},children:[n.jsx(z,{type:"submit",variant:"contained",startIcon:n.jsx(De,{}),disabled:a,size:"large",children:a?"Menyimpan...":"Simpan User"}),n.jsx(z,{variant:"outlined",onClick:x,disabled:a,size:"large",children:"Batal"})]})]})})})})]}),n.jsx(Ve,{open:o.open,autoHideDuration:6e3,onClose:()=>c({...o,open:!1}),children:n.jsx(He,{onClose:()=>c({...o,open:!1}),severity:o.severity,sx:{width:"100%"},children:o.message})})]})}export{st as default};
