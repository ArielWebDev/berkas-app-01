import{x as c,j as a,Q as j,t as i}from"./app-DQ50vfdB.js";import{T as x}from"./TailLayout-CUFZkN9l.js";import{F as b}from"./ArrowLeftIcon-MZP5C6a4.js";import"./TechStackBackground-vFG2YikW.js";import"./index-CXCxKWl8.js";import"./XMarkIcon-iLJawDXb.js";import"./UsersIcon-Do4GODTd.js";import"./transition-B40-nL65.js";import"./dialog-B4S7MQxj.js";import"./with-selector-CC73ae-U.js";import"./index-OSMIWnHG.js";function C({pinjaman:n,nasabah_list:u}){const{data:s,setData:l,put:m,processing:d,errors:t}=c({nasabah_id:n.nasabah_id.toString(),jumlah_pinjaman:n.jumlah_pinjaman,tujuan_pinjaman:n.tujuan_pinjaman,jangka_waktu:n.jangka_waktu,bunga:n.bunga}),r=e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(e),o=e=>{e.preventDefault(),m(route("pinjaman.update",n.id))};return a.jsxs(x,{children:[a.jsx(j,{title:`Edit Pinjaman #${n.id}`}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Edit Pinjaman #",n.id]}),a.jsx("p",{className:"text-gray-600",children:"Ubah data pinjaman nasabah"})]}),a.jsxs(i,{href:route("pinjaman.index"),className:"flex items-center text-gray-600 transition-colors hover:text-gray-900",children:[a.jsx(b,{className:"mr-2 h-5 w-5"}),"Kembali"]})]}),a.jsx("div",{className:"overflow-hidden rounded-lg bg-white shadow-sm",children:a.jsxs("form",{onSubmit:o,className:"space-y-6 p-6",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:["Nasabah ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{value:s.nasabah_id,onChange:e=>l("nasabah_id",e.target.value),className:`w-full rounded-lg border px-3 py-2 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 ${t.nasabah_id?"border-red-300":"border-gray-300"}`,disabled:n.status!=="diajukan",children:[a.jsx("option",{value:"",children:"Pilih Nasabah"}),u.map(e=>a.jsxs("option",{value:e.id.toString(),children:[e.nama_lengkap," - ",e.nik||e.nomor_ktp]},e.id))]}),t.nasabah_id&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.nasabah_id})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:["Jumlah Pinjaman ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-3 top-2 text-gray-500",children:"Rp"}),a.jsx("input",{type:"number",value:s.jumlah_pinjaman,onChange:e=>l("jumlah_pinjaman",Number(e.target.value)),className:`w-full rounded-lg border py-2 pl-10 pr-3 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 ${t.jumlah_pinjaman?"border-red-300":"border-gray-300"}`,placeholder:"Masukkan jumlah pinjaman",disabled:n.status!=="diajukan"})]}),t.jumlah_pinjaman&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.jumlah_pinjaman})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:["Tujuan Pinjaman ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("textarea",{rows:4,value:s.tujuan_pinjaman,onChange:e=>l("tujuan_pinjaman",e.target.value),className:`w-full rounded-lg border px-3 py-2 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 ${t.tujuan_pinjaman?"border-red-300":"border-gray-300"}`,placeholder:"Jelaskan tujuan penggunaan pinjaman",disabled:n.status!=="diajukan"}),t.tujuan_pinjaman&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.tujuan_pinjaman})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Jangka Waktu (Bulan)"}),a.jsxs("select",{value:s.jangka_waktu,onChange:e=>l("jangka_waktu",Number(e.target.value)),className:"w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-blue-500 focus:ring-1 focus:ring-blue-500",disabled:n.status!=="diajukan",children:[a.jsx("option",{value:6,children:"6 Bulan"}),a.jsx("option",{value:12,children:"12 Bulan"}),a.jsx("option",{value:18,children:"18 Bulan"}),a.jsx("option",{value:24,children:"24 Bulan"}),a.jsx("option",{value:36,children:"36 Bulan"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Bunga (% per bulan)"}),a.jsx("input",{type:"number",step:"0.1",value:s.bunga,onChange:e=>l("bunga",Number(e.target.value)),className:"w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-blue-500 focus:ring-1 focus:ring-blue-500",disabled:n.status!=="diajukan"})]})]}),s.jumlah_pinjaman>0&&a.jsxs("div",{className:"rounded-lg border border-blue-200 bg-blue-50 p-4",children:[a.jsx("h3",{className:"mb-2 font-medium text-blue-900",children:"Simulasi Pembayaran"}),a.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-blue-700",children:"Cicilan per Bulan:"}),a.jsx("p",{className:"font-medium text-blue-900",children:r((s.jumlah_pinjaman+s.jumlah_pinjaman*s.bunga/100*s.jangka_waktu)/s.jangka_waktu)})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-blue-700",children:"Total Bunga:"}),a.jsx("p",{className:"font-medium text-blue-900",children:r(s.jumlah_pinjaman*s.bunga/100*s.jangka_waktu)})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-blue-700",children:"Total Bayar:"}),a.jsx("p",{className:"font-medium text-blue-900",children:r(s.jumlah_pinjaman+s.jumlah_pinjaman*s.bunga/100*s.jangka_waktu)})]})]})]}),n.status!=="diajukan"&&a.jsx("div",{className:"rounded-lg border border-yellow-200 bg-yellow-50 p-4",children:a.jsxs("p",{className:"text-sm text-yellow-800",children:[a.jsx("strong",{children:"Catatan:"}),' Pinjaman dengan status "',n.status,'" tidak dapat diubah. Hanya pinjaman dengan status "diajukan" yang dapat diedit.']})}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(i,{href:route("pinjaman.show",n.id),className:"text-blue-600 hover:text-blue-800",children:"Lihat Detail"}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(i,{href:route("pinjaman.index"),className:"rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Batal"}),n.status==="diajukan"&&a.jsx("button",{type:"submit",disabled:d,className:"rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 disabled:opacity-50",children:d?"Menyimpan...":"Simpan Perubahan"})]})]})]})})]})]})}export{C as default};
