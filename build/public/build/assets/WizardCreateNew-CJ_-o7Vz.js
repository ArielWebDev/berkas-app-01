import{r as i,x as T,j as e,Q as L,t as z,S as A}from"./app-DQ50vfdB.js";import{F as I,b as J,T as M}from"./TailLayout-CUFZkN9l.js";import{F as U}from"./CurrencyDollarIcon-8NyMmQln.js";import{F as j}from"./DocumentIcon-RcDAm5pJ.js";import{F as C}from"./CheckCircleIcon-DZlEFXlT.js";import{a as G}from"./XMarkIcon-iLJawDXb.js";import"./TechStackBackground-vFG2YikW.js";import"./index-CXCxKWl8.js";import"./UsersIcon-Do4GODTd.js";import"./transition-B40-nL65.js";import"./dialog-B4S7MQxj.js";import"./with-selector-CC73ae-U.js";import"./index-OSMIWnHG.js";function O({title:l,titleId:n,...c},r){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":n},c),l?i.createElement("title",{id:n},l):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}const B=i.forwardRef(O);function Q({title:l,titleId:n,...c},r){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":n},c),l?i.createElement("title",{id:n},l):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const X=i.forwardRef(Q);function de({nasabah_list:l}){var k,_,F,S,P;const[n,c]=i.useState(1),[r,y]=i.useState([]),[v,h]=i.useState(!1),{data:s,setData:m,post:R,processing:w,errors:d}=T({nasabah_id:"",jumlah_pinjaman:0,tujuan_pinjaman:"",jangka_waktu:12,bunga:2.5,berkas:[]}),u=[{id:1,name:"Pilih Nasabah",description:"Pilih nasabah untuk pengajuan pinjaman",icon:I,fields:["nasabah_id"]},{id:2,name:"Detail Pinjaman",description:"Masukkan detail pinjaman",icon:U,fields:["jumlah_pinjaman","tujuan_pinjaman","jangka_waktu","bunga"]},{id:3,name:"Upload Berkas",description:"Upload dokumen pendukung",icon:j,fields:["berkas"]},{id:4,name:"Review & Submit",description:"Review data sebelum submit",icon:J,fields:[]}],p=u.find(a=>a.id===n),g=u.length,b=()=>{const a=(p==null?void 0:p.fields)||[];for(const t of a)if(t==="nasabah_id"&&!s.nasabah_id||t==="jumlah_pinjaman"&&(!s.jumlah_pinjaman||s.jumlah_pinjaman<=0)||t==="tujuan_pinjaman"&&!s.tujuan_pinjaman.trim()||t==="berkas"&&r.length===0)return!1;return!0},D=()=>{b()&&n<g&&c(n+1)},$=()=>{n>1&&c(n-1)},E=a=>{if(a.target.files){const t=Array.from(a.target.files);y([...r,...t]),m("berkas",[...r,...t])}},K=a=>{const t=r.filter((f,N)=>N!==a);y(t),m("berkas",t)},W=a=>{a.preventDefault(),h(!0);const t=new FormData;t.append("nasabah_id",s.nasabah_id),t.append("jumlah_pinjaman",s.jumlah_pinjaman.toString()),t.append("tujuan_pinjaman",s.tujuan_pinjaman),t.append("jangka_waktu",s.jangka_waktu.toString()),t.append("bunga",s.bunga.toString()),r.forEach((f,N)=>{t.append(`berkas[${N}]`,f)}),R(route("pinjaman.store.wizard"),{onSuccess:f=>{h(!1),A.visit("/pinjaman",{method:"get",data:{success:"Pinjaman berhasil dibuat dan sedang menunggu review dari Admin Kredit"}})},onError:()=>{h(!1)}})},o=()=>l.find(a=>a.id.toString()===s.nasabah_id),x=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a);return e.jsxs(M,{children:[e.jsx(L,{title:"Wizard Pengajuan Pinjaman"}),e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Pengajuan Pinjaman"}),e.jsx("p",{className:"mt-1 text-gray-600",children:"Wizard untuk memudahkan pengajuan pinjaman baru"})]}),e.jsxs(z,{href:route("pinjaman.index"),className:"flex items-center text-gray-600 transition-colors hover:text-gray-900",children:[e.jsx(B,{className:"mr-2 h-5 w-5"}),"Kembali ke Daftar"]})]})}),e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"flex items-center justify-between",children:u.map((a,t)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`flex h-10 w-10 items-center justify-center rounded-full border-2 transition-all duration-300 ${n>a.id?"scale-110 transform border-green-500 bg-green-500 text-white":n===a.id?"scale-110 transform border-blue-500 bg-blue-500 text-white shadow-lg":"border-gray-300 bg-white text-gray-400"}`,children:n>a.id?e.jsx(C,{className:"h-6 w-6"}):e.jsx(a.icon,{className:"h-5 w-5"})}),t<u.length-1&&e.jsx("div",{className:`mx-2 h-1 w-20 transition-all duration-300 ${n>a.id?"bg-green-500":"bg-gray-300"}`})]},a.id))}),e.jsx("div",{className:"mt-4 flex justify-between",children:u.map(a=>e.jsxs("div",{className:"flex-1 text-center",children:[e.jsx("h3",{className:`text-sm font-medium transition-colors ${n>=a.id?"text-gray-900":"text-gray-400"}`,children:a.name}),e.jsx("p",{className:`mt-1 text-xs transition-colors ${n>=a.id?"text-gray-600":"text-gray-400"}`,children:a.description})]},a.id))})]}),e.jsx("div",{className:"overflow-hidden rounded-xl border border-gray-200 bg-white shadow-lg",children:e.jsxs("form",{onSubmit:W,children:[e.jsxs("div",{className:"min-h-[500px] px-6 py-8",children:[n===1&&e.jsxs("div",{className:"animate-slide-in-right",children:[e.jsx("h2",{className:"mb-6 text-xl font-semibold text-gray-900",children:"Pilih Nasabah"}),e.jsx("div",{className:"space-y-4",children:l.map(a=>e.jsx("div",{className:`cursor-pointer rounded-lg border p-4 transition-all duration-200 hover:shadow-md ${s.nasabah_id===a.id.toString()?"scale-[1.02] transform border-blue-500 bg-blue-50 shadow-md":"border-gray-300 hover:border-gray-400"}`,onClick:()=>m("nasabah_id",a.id.toString()),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:a.nama_lengkap}),e.jsxs("p",{className:"text-sm text-gray-600",children:["NIK: ",a.nik||a.nomor_ktp]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["WA: ",a.nomor_wa]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Pinjaman Aktif"}),e.jsx("p",{className:"font-medium",children:a.pinjaman_count||0})]})]})},a.id))}),d.nasabah_id&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:d.nasabah_id})]}),n===2&&e.jsxs("div",{className:"animate-slide-in-right",children:[e.jsx("h2",{className:"mb-6 text-xl font-semibold text-gray-900",children:"Detail Pinjaman"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:["Jumlah Pinjaman ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2 text-gray-500",children:"Rp"}),e.jsx("input",{type:"number",value:s.jumlah_pinjaman,onChange:a=>m("jumlah_pinjaman",Number(a.target.value)),className:`w-full rounded-lg border py-2 pl-10 pr-3 transition-colors focus:border-transparent focus:ring-2 focus:ring-blue-500 ${d.jumlah_pinjaman?"border-red-300":"border-gray-300"}`,placeholder:"Masukkan jumlah pinjaman"})]}),d.jumlah_pinjaman&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.jumlah_pinjaman})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:["Tujuan Pinjaman ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{rows:4,value:s.tujuan_pinjaman,onChange:a=>m("tujuan_pinjaman",a.target.value),className:`w-full rounded-lg border px-3 py-2 transition-colors focus:border-transparent focus:ring-2 focus:ring-blue-500 ${d.tujuan_pinjaman?"border-red-300":"border-gray-300"}`,placeholder:"Jelaskan tujuan penggunaan pinjaman"}),d.tujuan_pinjaman&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.tujuan_pinjaman})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Jangka Waktu (Bulan)"}),e.jsxs("select",{value:s.jangka_waktu,onChange:a=>m("jangka_waktu",Number(a.target.value)),className:"w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-transparent focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:6,children:"6 Bulan"}),e.jsx("option",{value:12,children:"12 Bulan"}),e.jsx("option",{value:18,children:"18 Bulan"}),e.jsx("option",{value:24,children:"24 Bulan"}),e.jsx("option",{value:36,children:"36 Bulan"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Bunga (% per bulan)"}),e.jsx("input",{type:"number",step:"0.1",value:s.bunga,onChange:a=>m("bunga",Number(a.target.value)),className:"w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-transparent focus:ring-2 focus:ring-blue-500"})]})]}),s.jumlah_pinjaman>0&&e.jsxs("div",{className:"mt-6 rounded-lg border border-blue-200 bg-blue-50 p-4",children:[e.jsx("h3",{className:"mb-2 font-medium text-blue-900",children:"Simulasi Pembayaran"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-700",children:"Cicilan per Bulan:"}),e.jsx("p",{className:"font-medium text-blue-900",children:x((s.jumlah_pinjaman+s.jumlah_pinjaman*s.bunga/100*s.jangka_waktu)/s.jangka_waktu)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-700",children:"Total Bunga:"}),e.jsx("p",{className:"font-medium text-blue-900",children:x(s.jumlah_pinjaman*s.bunga/100*s.jangka_waktu)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-700",children:"Total Bayar:"}),e.jsx("p",{className:"font-medium text-blue-900",children:x(s.jumlah_pinjaman+s.jumlah_pinjaman*s.bunga/100*s.jangka_waktu)})]})]})]})]})]}),n===3&&e.jsxs("div",{className:"animate-slide-in-right",children:[e.jsx("h2",{className:"mb-6 text-xl font-semibold text-gray-900",children:"Upload Berkas"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-lg border-2 border-dashed border-gray-300 p-6 text-center transition-colors hover:border-gray-400",children:[e.jsx(j,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[e.jsx("span",{className:"text-base font-medium text-blue-600 hover:text-blue-500",children:"Klik untuk upload file"}),e.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",multiple:!0,accept:".pdf,.jpg,.jpeg,.png,.doc,.docx",onChange:E})]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"atau drag and drop"})]}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"PDF, JPG, PNG, DOC sampai 10MB"})]}),r.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"mb-3 text-sm font-medium text-gray-900",children:"File Terupload:"}),e.jsx("div",{className:"space-y-2",children:r.map((a,t)=>e.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-gray-50 p-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(j,{className:"mr-3 h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:a.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[(a.size/1024/1024).toFixed(2)," MB"]})]})]}),e.jsx("button",{type:"button",onClick:()=>K(t),className:"text-red-600 transition-colors hover:text-red-800",children:e.jsx(G,{className:"h-5 w-5"})})]},t))})]}),e.jsxs("div",{className:"rounded-lg border border-yellow-200 bg-yellow-50 p-4",children:[e.jsx("h3",{className:"mb-2 text-sm font-medium text-yellow-900",children:"Dokumen yang Diperlukan:"}),e.jsxs("ul",{className:"list-inside list-disc space-y-1 text-xs text-yellow-800",children:[e.jsx("li",{children:"Fotocopy KTP Nasabah"}),e.jsx("li",{children:"Fotocopy Kartu Keluarga"}),e.jsx("li",{children:"Slip Gaji atau Surat Keterangan Penghasilan"}),e.jsx("li",{children:"Rekening Koran 3 bulan terakhir"}),e.jsx("li",{children:"Dokumen jaminan (jika ada)"})]})]})]})]}),n===4&&e.jsxs("div",{className:"animate-slide-in-right",children:[e.jsx("h2",{className:"mb-6 text-xl font-semibold text-gray-900",children:"Review & Submit"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-lg bg-gray-50 p-4",children:[e.jsx("h3",{className:"mb-3 font-medium text-gray-900",children:"Informasi Nasabah"}),o()&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Nama:"}),e.jsx("p",{className:"font-medium",children:(k=o())==null?void 0:k.nama_lengkap})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"NIK:"}),e.jsx("p",{className:"font-medium",children:((_=o())==null?void 0:_.nik)||((F=o())==null?void 0:F.nomor_ktp)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Alamat:"}),e.jsx("p",{className:"font-medium",children:(S=o())==null?void 0:S.alamat})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"No. WA:"}),e.jsx("p",{className:"font-medium",children:(P=o())==null?void 0:P.nomor_wa})]})]})]}),e.jsxs("div",{className:"rounded-lg bg-gray-50 p-4",children:[e.jsx("h3",{className:"mb-3 font-medium text-gray-900",children:"Detail Pinjaman"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Jumlah Pinjaman:"}),e.jsx("p",{className:"font-medium",children:x(s.jumlah_pinjaman)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Jangka Waktu:"}),e.jsxs("p",{className:"font-medium",children:[s.jangka_waktu," bulan"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Bunga:"}),e.jsxs("p",{className:"font-medium",children:[s.bunga,"% per bulan"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Cicilan per Bulan:"}),e.jsx("p",{className:"font-medium",children:x((s.jumlah_pinjaman+s.jumlah_pinjaman*s.bunga/100*s.jangka_waktu)/s.jangka_waktu)})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-gray-600",children:"Tujuan Pinjaman:"}),e.jsx("p",{className:"font-medium",children:s.tujuan_pinjaman})]})]})]}),e.jsxs("div",{className:"rounded-lg bg-gray-50 p-4",children:[e.jsxs("h3",{className:"mb-3 font-medium text-gray-900",children:["Dokumen Terupload (",r.length,")"]}),e.jsx("div",{className:"space-y-2",children:r.map((a,t)=>e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(j,{className:"mr-2 h-4 w-4 text-gray-400"}),e.jsx("span",{children:a.name})]},t))})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200 bg-gray-50 px-6 py-4",children:[e.jsxs("button",{type:"button",onClick:$,disabled:n===1,className:"flex items-center rounded-lg border border-gray-300 bg-white px-4 py-2 text-gray-700 transition-colors hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50",children:[e.jsx(B,{className:"mr-2 h-4 w-4"}),"Previous"]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("span",{className:"text-sm text-gray-600",children:["Step ",n," of ",g]})}),n<g?e.jsxs("button",{type:"button",onClick:D,disabled:!b(),className:"flex items-center rounded-lg bg-blue-600 px-4 py-2 text-white transition-colors hover:bg-blue-700 disabled:cursor-not-allowed disabled:opacity-50",children:["Next",e.jsx(X,{className:"ml-2 h-4 w-4"})]}):e.jsx("button",{type:"submit",disabled:w||v||!b(),className:"flex items-center rounded-lg bg-green-600 px-6 py-2 text-white transition-colors hover:bg-green-700 disabled:cursor-not-allowed disabled:opacity-50",children:w||v?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"-ml-1 mr-3 h-4 w-4 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Submitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"mr-2 h-4 w-4"}),"Submit Pengajuan"]})})]})]})}),e.jsx("style",{children:`
        @keyframes slide-in-right {
          from {
            opacity: 0;
            transform: translateX(20px);
          }
          to {
            opacity: 1;
            transform: translateX(0);
          }
        }
        
        .animate-slide-in-right {
          animation: slide-in-right 0.4s ease-out;
        }
      `})]})}export{de as default};
