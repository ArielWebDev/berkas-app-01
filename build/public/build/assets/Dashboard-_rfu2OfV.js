import{j as e,Q as B,t as m}from"./app-DQ50vfdB.js";import{c as y,M as L,B as o,T as r,A as P,P as b,C as d,a as x,b as j,d as _,L as g,e as f,f as v,g as M,h as C}from"./MaterialLayout-ChKCvITY.js";import{m as k}from"./proxy-Bnqo7GU3.js";import{G as n,C as W,L as A,a as T}from"./LinearProgress-CbU3kU37.js";import"./index-epZWharM.js";import"./index-OSMIWnHG.js";const R=y([e.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),e.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")]),z=y(e.jsx("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"})),U=({status:l})=>{const a=c=>({diajukan:{color:"info",label:"Diajukan"},diperiksa:{color:"warning",label:"Diperiksa"},dikembalikan:{color:"error",label:"Dikembalikan"},dianalisis:{color:"primary",label:"Dianalisis"},siap_diputuskan:{color:"secondary",label:"Siap Diputuskan"},disetujui:{color:"success",label:"Disetujui"},ditolak:{color:"error",label:"Ditolak"}})[c]||{color:"default",label:c},{color:s,label:i}=a(l);return e.jsx(T,{label:i,color:s,size:"small"})},u=({title:l,value:a,icon:s,color:i,trend:c})=>e.jsx(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},whileHover:{scale:1.02},children:e.jsx(d,{sx:{height:"100%",position:"relative",overflow:"visible"},children:e.jsx(x,{children:e.jsxs(o,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(o,{children:[e.jsx(r,{color:"textSecondary",gutterBottom:!0,variant:"body2",children:l}),e.jsx(r,{variant:"h4",component:"div",fontWeight:"bold",children:typeof a=="number"?a.toLocaleString("id-ID"):a}),c&&e.jsx(r,{variant:"body2",color:"success.main",sx:{mt:1},children:c})]}),e.jsx(C,{sx:{bgcolor:i,width:56,height:56},children:s})]})})})}),O=({data:l})=>{const a=Object.values(l).reduce((s,i)=>s+i,0);return e.jsx(d,{children:e.jsxs(x,{children:[e.jsx(r,{variant:"h6",gutterBottom:!0,children:"Workflow Overview"}),e.jsx(o,{sx:{mt:2},children:Object.entries(l).map(([s,i])=>e.jsxs(o,{sx:{mb:2},children:[e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(r,{variant:"body2",color:"textSecondary",children:s.replace("_"," ").toUpperCase()}),e.jsx(r,{variant:"body2",fontWeight:"medium",children:i})]}),e.jsx(A,{variant:"determinate",value:a>0?i/a*100:0,sx:{height:6,borderRadius:3}})]},s))})]})})};function N({auth:l,statistics:a,recent_pinjaman:s,workflow_overview:i,recent_activity:c}){const{user:h}=l,D=t=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(t),p=t=>new Date(t).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}),w=h.role==="staf_input",I=h.role==="admin";return e.jsxs(L,{children:[e.jsx(B,{title:"Dashboard"}),e.jsxs(k.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsxs(o,{sx:{mb:4},children:[e.jsx(r,{variant:"h4",fontWeight:"bold",gutterBottom:!0,children:"Dashboard"}),e.jsxs(r,{variant:"body1",color:"textSecondary",children:["Selamat datang, ",h.name,"! Kelola berkas pinjaman dengan mudah."]})]}),e.jsxs(n,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(n,{item:!0,xs:12,sm:6,md:3,children:e.jsx(u,{title:"Total Pinjaman",value:a.total_pinjaman,icon:e.jsx(P,{}),color:"#1976d2",trend:"+12% dari bulan lalu"})}),e.jsx(n,{item:!0,xs:12,sm:6,md:3,children:e.jsx(u,{title:"Total Nasabah",value:a.total_nasabah,icon:e.jsx(b,{}),color:"#2e7d32"})}),e.jsx(n,{item:!0,xs:12,sm:6,md:3,children:e.jsx(u,{title:"Pending Review",value:a.pinjaman_pending,icon:e.jsx(R,{}),color:"#ed6c02"})}),e.jsx(n,{item:!0,xs:12,sm:6,md:3,children:e.jsx(u,{title:"Disetujui",value:a.pinjaman_approved,icon:e.jsx(W,{}),color:"#2e7d32"})})]}),e.jsxs(n,{container:!0,spacing:3,children:[e.jsx(n,{item:!0,xs:12,md:4,children:e.jsx(d,{children:e.jsxs(x,{children:[e.jsx(r,{variant:"h6",gutterBottom:!0,children:"Quick Actions"}),e.jsxs(o,{sx:{display:"flex",flexDirection:"column",gap:2,mt:2},children:[w&&e.jsx(j,{component:m,href:"/pinjaman/create/wizard",variant:"contained",startIcon:e.jsx(_,{}),fullWidth:!0,size:"large",children:"Buat Pengajuan Baru"}),e.jsx(j,{component:m,href:"/pinjaman",variant:"outlined",startIcon:e.jsx(z,{}),fullWidth:!0,children:"Lihat Semua Pinjaman"}),I&&e.jsx(j,{component:m,href:"/users",variant:"outlined",startIcon:e.jsx(b,{}),fullWidth:!0,children:"Kelola Users"})]})]})})}),e.jsx(n,{item:!0,xs:12,md:4,children:e.jsx(O,{data:i.all_status})}),e.jsx(n,{item:!0,xs:12,md:4,children:e.jsx(d,{children:e.jsxs(x,{children:[e.jsx(r,{variant:"h6",gutterBottom:!0,children:"Pinjaman Terbaru"}),e.jsx(g,{sx:{pt:0},children:s.slice(0,5).map(t=>e.jsx(f,{component:m,href:`/pinjaman/${t.id}`,sx:{borderRadius:1,mb:1,"&:hover":{backgroundColor:"action.hover"}},children:e.jsx(v,{primary:e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(r,{variant:"body2",fontWeight:"medium",children:t.nasabah.nama_lengkap}),e.jsx(U,{status:t.status})]}),secondary:e.jsxs(o,{sx:{mt:.5},children:[e.jsx(r,{variant:"caption",color:"textSecondary",children:D(t.jumlah_pinjaman)}),e.jsx("br",{}),e.jsx(r,{variant:"caption",color:"textSecondary",children:p(t.created_at)})]})})},t.id))})]})})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(d,{children:e.jsxs(x,{children:[e.jsx(r,{variant:"h6",gutterBottom:!0,children:"Aktivitas Terbaru"}),e.jsx(g,{children:c.slice(0,8).map((t,S)=>e.jsxs(f,{divider:S<c.length-1,children:[e.jsx(M,{children:e.jsx(C,{sx:{width:32,height:32},children:t.user.name.charAt(0).toUpperCase()})}),e.jsx(v,{primary:t.description,secondary:`${t.user.name} â€¢ ${p(t.created_at)}`})]},t.id))})]})})})]})]})]})}export{N as default};
